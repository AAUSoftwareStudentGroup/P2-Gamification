(function(){"use strict";Bridge.define("ThreeOneSevenBee.Model.Expression.ExpressionRules.Rules",{statics:{productToExponentRule:function(expression,selection){var product=Bridge.as(expression,ThreeOneSevenBee.Model.Expression.Expressions.VariadicOperatorExpression),suggestion,indexes,result,i;if(Bridge.hasValue(product)&&product.getType()===ThreeOneSevenBee.Model.Expression.Expressions.OperatorType.multiply&&Bridge.Linq.Enumerable.from(selection).takeWhile(function(e){return ThreeOneSevenBee.Model.Expression.ExpressionBase.op_Equality(selection.getItem(0),e)&&ThreeOneSevenBee.Model.Expression.ExpressionBase.op_Equality(e.getParent(),expression)}).count()===selection.getCount()){if(suggestion=new ThreeOneSevenBee.Model.Expression.Expressions.BinaryOperatorExpression(selection.getItem(0).clone(),new ThreeOneSevenBee.Model.Expression.Expressions.NumericExpression(selection.getCount()),ThreeOneSevenBee.Model.Expression.Expressions.OperatorType.power),product.getCount()===selection.getCount())return new ThreeOneSevenBee.Model.Expression.Identity(suggestion,suggestion);for(indexes=Bridge.Linq.Enumerable.from(selection).select(function(s){return product.indexOfReference(s)}).where($_.ThreeOneSevenBee.Model.Expression.ExpressionRules.Rules.f1).toList(Bridge.Int),indexes.sort(),result=Bridge.as(product.clone(),ThreeOneSevenBee.Model.Expression.Expressions.VariadicOperatorExpression),i=0;i<indexes.getCount();i++)result.removeAt(indexes.getItem(i)-i);return result.insert(indexes.getItem(0),suggestion),new ThreeOneSevenBee.Model.Expression.Identity(suggestion,result)}return null}}});var $_={};Bridge.ns("ThreeOneSevenBee.Model.Expression.ExpressionRules.Rules",$_);Bridge.apply($_.ThreeOneSevenBee.Model.Expression.ExpressionRules.Rules,{f1:function(i){return i!==-1}});Bridge.init()})(this);