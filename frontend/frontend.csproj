<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="12.0">
  <PropertyGroup>
    <AssemblyName>frontend</AssemblyName>
    <OutputPath>bin\</OutputPath>
    <NoStdLib>true</NoStdLib>
    <WarningLevel>0</WarningLevel>
    <ScriptsPath>..\backend\www\js\</ScriptsPath>
    <ProjectGuid>{F577D4B4-847D-4F13-8B75-B3BC19DC046D}</ProjectGuid>
  </PropertyGroup>

  <PropertyGroup>
    <PreBuildEvent>echo "test"</PreBuildEvent>
    <PostBuildEvent>echo "test"</PostBuildEvent>
  </PropertyGroup>
  
  <ItemGroup>
    <Compile Include="CanvasRenderingContext2DExtensions.cs" />
    <Compile Include="Euclidean\Circle.cs" />
    <Compile Include="Euclidean\Rectangle.cs" />
    <Compile Include="Expression.cs" />
    <Compile Include="ExpressionAnalyzer.cs" />
    <Compile Include="ExpressionParser.cs" />
    <Compile Include="ExpressionRule.cs" />
    <Compile Include="ExpressionSerializer.cs" />
    <Compile Include="Expressions\ConstantExpression.cs" />
    <Compile Include="Expressions\DelimiterExpression.cs" />
    <Compile Include="Expressions\FunctionExpression.cs" />
    <Compile Include="Expressions\NumericExpression.cs" />
    <Compile Include="Expressions\OperatorExpression.cs" />
    <Compile Include="Expressions\UnaryMinusExpression.cs" />
    <Compile Include="Expressions\VariableExpression.cs" />
    <Compile Include="Game.cs" />
    <Compile Include="Euclidean\Vector2.cs" />
    <Compile Include="Html\ElementInput.cs" />
    <Compile Include="Html\Pointer.cs" />
    <Compile Include="Html\Touch.cs" />
    <Compile Include="Html\TouchEvent.cs" />
    <Compile Include="Html\TouchList.cs" />
    <Compile Include="IExpression.cs" />
    <Compile Include="Operator.cs" />
    <Compile Include="ProgressbarCircle.cs" />
    <Compile Include="ProgressbarStar.cs" />
    <Compile Include="Token.cs" />
    <Compile Include="UI\CompositeView.cs" />
    <Compile Include="UI\Context.cs" />
    <Compile Include="UI\LabelView.cs" />
    <Compile Include="UI\ProgressbarStarView.cs" />
    <Compile Include="UI\View.cs" />

    <Compile Include="App.cs" />
    <Compile Include="PrototypeGame.cs" />

    <Compile Include="Properties\AssemblyInfo.cs" />
  </ItemGroup>
½
  <ItemGroup>
    <Reference Include="lib\Bridge.dll">
      <HintPath>lib\Bridge.dll</HintPath>
    </Reference>
    <Reference Include="lib\Bridge.Html5.dll">
      <HintPath>lib\Bridge.Html5.dll</HintPath>
    </Reference>
    <Reference Include="lib\Bridge.Collections.dll">
      <HintPath>lib\Bridge.Collections.dll</HintPath>
    </Reference>
    <Reference Include="lib\Bridge.jQuery2.dll">
      <HintPath>lib\Bridge.jQuery2.dll</HintPath>
    </Reference>
    <!-- <Reference Include="..\model\bin\model.dll" /> -->
  </ItemGroup>
  <!-- TARGETS -->
  <Target Name="Build">
    <Exec Command="$(PreBuildEvent)" />
    
    <MakeDir Directories="$(OutputPath)" Condition="!Exists('$(OutputPath)')" />
    <!-- <MSBuild Projects="..\model\model.csproj" Targets="Lib" /> -->
    <Csc NoStandardLib="$(NoStdLib)" warninglevel="$(WarningLevel)" Sources="@(Compile)" OutputAssembly="$(OutputPath)$(AssemblyName).dll" References="@(Reference)" />
    <Copy SourceFiles="$(OutputPath)$(AssemblyName).dll" DestinationFiles="lib\$(AssemblyName).dll" />
    <Exec Command="lib\Bridge.Builder.exe -lib lib\$(AssemblyName).dll -o ..\backend\www\js\" />
    
    <Exec Command="$(PostBuildEvent)" />
  </Target>
  <Target Name="Clean">
    <Delete Files="$(OutputPath)$(AssemblyName).dll" />
  </Target>
  <Target Name="Rebuild" DependsOnTargets="Clean;Build" />

</Project>