(function(){"use strict";Bridge.define("ThreeOneSevenBee.Framework.Html.ElementInput",{statics:{MOUSE_ID:0},pointers:null,config:{events:{PointerEnter:null,PointerDown:null,PointerMove:null,PointerUp:null,PointerLeave:null},properties:{Element:null}},constructor:function(element){this.pointers=new Bridge.Dictionary$2(Bridge.Int,ThreeOneSevenBee.Framework.Html.Pointer)();this.setElement(element);this.getElement().onmouseenter=Bridge.fn.bind(this,this.onMouseEnter);this.getElement().onmousemove=Bridge.fn.bind(this,this.onMouseMove);this.getElement().onmouseleave=Bridge.fn.bind(this,this.onMouseLeave);this.getElement().onmousedown=Bridge.fn.bind(this,this.onMouseDown);this.getElement().onmouseup=Bridge.fn.bind(this,this.onMouseUp);this.getElement().addEventListener("touchstart",Bridge.fn.bind(this,this.onTouchStart));this.getElement().addEventListener("touchmove",Bridge.fn.bind(this,this.onTouchMove));this.getElement().addEventListener("touchend",Bridge.fn.bind(this,this.onTouchEnd))},getPointers:function(){return this.pointers.getValues()},onMouseEnter:function(e){var pointer={},pointerEnter;this.pointers.tryGetValue(Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID,pointer)||(pointer.v=new ThreeOneSevenBee.Framework.Html.Pointer("constructor$1",Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID,ThreeOneSevenBee.Framework.Html.PointerTypes.mouse));this.pointers.set(Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID,pointer.v);pointer.v.update(e,this.getElement());pointerEnter=this.PointerEnter;Bridge.hasValue(pointerEnter)&&pointerEnter(pointer.v)},onMouseDown:function(e){var pointer={},pointerDown;this.pointers.tryGetValue(Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID,pointer)||(pointer.v=new ThreeOneSevenBee.Framework.Html.Pointer("constructor$1",Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID,ThreeOneSevenBee.Framework.Html.PointerTypes.mouse));this.pointers.set(Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID,pointer.v);pointer.v.update(e,this.getElement());pointerDown=this.PointerDown;Bridge.hasValue(pointerDown)&&pointerDown(pointer.v)},onMouseMove:function(e){var pointer={},pointerMove;this.pointers.tryGetValue(Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID,pointer)||(pointer.v=new ThreeOneSevenBee.Framework.Html.Pointer("constructor$1",Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID,ThreeOneSevenBee.Framework.Html.PointerTypes.mouse));this.pointers.set(Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID,pointer.v);pointer.v.update(e,this.getElement());pointerMove=this.PointerMove;Bridge.hasValue(pointerMove)&&pointerMove(pointer.v)},onMouseUp:function(e){var pointer={},pointerUp;this.pointers.tryGetValue(Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID,pointer)||(pointer.v=new ThreeOneSevenBee.Framework.Html.Pointer("constructor$1",Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID,ThreeOneSevenBee.Framework.Html.PointerTypes.mouse));pointer.v.update(e,this.getElement());pointerUp=this.PointerUp;Bridge.hasValue(pointerUp)&&pointerUp(pointer.v);this.pointers.remove(Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID)},onMouseLeave:function(e){var pointer={},pointerLeave;this.pointers.tryGetValue(Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID,pointer)||(pointer.v=new ThreeOneSevenBee.Framework.Html.Pointer("constructor$1",Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID,ThreeOneSevenBee.Framework.Html.PointerTypes.mouse));pointer.v.update(e,this.getElement());pointerLeave=this.PointerLeave;Bridge.hasValue(pointerLeave)&&pointerLeave(pointer.v);this.pointers.remove(Bridge.get(ThreeOneSevenBee.Framework.Html.ElementInput).MOUSE_ID)},onTouchStart:function(e){for(var touchEvent=Bridge.as(e,TouchEvent),touch,pointer,pointerDown,$t=Bridge.getEnumerator(touchEvent.changedTouches);$t.moveNext();)touch=$t.getCurrent(),pointer={},this.pointers.tryGetValue(touch.identifier,pointer)||(pointer.v=new ThreeOneSevenBee.Framework.Html.Pointer("constructor$1",touch.identifier,ThreeOneSevenBee.Framework.Html.PointerTypes.touch)),this.pointers.set(touch.identifier,pointer.v),pointer.v.update$1(touch,this.getElement()),pointerDown=this.PointerDown,Bridge.hasValue(pointerDown)&&pointerDown(pointer.v)},onTouchMove:function(e){for(var touchEvent=Bridge.as(e,TouchEvent),touch,pointer,pointerMove,$t=Bridge.getEnumerator(touchEvent.changedTouches);$t.moveNext();)touch=$t.getCurrent(),pointer={},this.pointers.tryGetValue(touch.identifier,pointer)||(pointer.v=new ThreeOneSevenBee.Framework.Html.Pointer("constructor$1",touch.identifier,ThreeOneSevenBee.Framework.Html.PointerTypes.mouse)),this.pointers.set(touch.identifier,pointer.v),pointer.v.update$1(touch,this.getElement()),pointerMove=this.PointerMove,Bridge.hasValue(pointerMove)&&pointerMove(pointer.v)},onTouchEnd:function(e){for(var $t1,touchEvent=Bridge.as(e,TouchEvent),touch,pointer,pointerUp,$t=Bridge.getEnumerator(touchEvent.changedTouches);$t.moveNext();)touch=$t.getCurrent(),pointer={},this.pointers.tryGetValue(touch.identifier,pointer)||this.pointers.set(touch.identifier,($t1=new ThreeOneSevenBee.Framework.Html.Pointer("constructor$1",touch.identifier,ThreeOneSevenBee.Framework.Html.PointerTypes.mouse),pointer.v=$t1,$t1)),pointer.v.update$1(touch,this.getElement()),pointerUp=this.PointerUp,Bridge.hasValue(pointerUp)&&pointerUp(pointer.v),this.pointers.remove(touch.identifier)}});Bridge.define("ThreeOneSevenBee.Framework.Html.Pointer",{config:{properties:{Id:0,Type:null,ScreenX:0,ScreenY:0,ClientX:0,ClientY:0,PageX:0,PageY:0,RelativeX:0,RelativeY:0,Target:null}},constructor$1:function(id,type){this.setId(id);this.setType(type)},constructor:function(e,relativeTo){ThreeOneSevenBee.Framework.Html.Pointer.prototype.constructor$1.call(this,0,ThreeOneSevenBee.Framework.Html.PointerTypes.touch);this.setScreenX(e.screenX);this.setScreenY(e.screenY);this.setClientX(e.clientX);this.setClientY(e.clientY);this.setPageX(e.pageX);this.setPageY(e.pageY);this.setTarget(e.target);this.setRelativeX(e.pageX-relativeTo.offsetLeft);this.setRelativeY(e.pageY-relativeTo.offsetTop)},constructor$2:function(e,relativeTo){ThreeOneSevenBee.Framework.Html.Pointer.prototype.constructor$1.call(this,e.identifier,ThreeOneSevenBee.Framework.Html.PointerTypes.touch);this.setScreenX(e.screenX);this.setScreenY(e.screenY);this.setClientX(e.clientX);this.setClientY(e.clientY);this.setPageX(e.pageX);this.setPageY(e.pageY);this.setTarget(e.target);this.setRelativeX(e.pageX-relativeTo.offsetLeft);this.setRelativeY(e.pageY-relativeTo.offsetTop)},update:function(e,relativeTo){if(!(this.getType()===ThreeOneSevenBee.Framework.Html.PointerTypes.mouse))throw new Bridge.InvalidOperationException("Tried to update "+this.getType()+" pointer with mouse data.");this.setScreenX(e.screenX);this.setScreenY(e.screenY);this.setClientX(e.clientX);this.setClientY(e.clientY);this.setPageX(e.pageX);this.setPageY(e.pageY);this.setTarget(e.target);this.setRelativeX(e.pageX-relativeTo.offsetLeft);this.setRelativeY(e.pageY-relativeTo.offsetTop)},update$1:function(e,relativeTo){if(!(this.getType()===ThreeOneSevenBee.Framework.Html.PointerTypes.touch))throw new Bridge.InvalidOperationException("Tried to update "+this.getType()+" pointer with touch data.");this.setScreenX(e.screenX);this.setScreenY(e.screenY);this.setClientX(e.clientX);this.setClientY(e.clientY);this.setPageX(e.pageX);this.setPageY(e.pageY);this.setTarget(e.target);this.setRelativeX(e.pageX-relativeTo.offsetLeft);this.setRelativeY(e.pageY-relativeTo.offsetTop)}});Bridge.define("ThreeOneSevenBee.Framework.Html.PointerTypes",{statics:{mouse:0,touch:1},$enum:!0});Bridge.init()})(this);